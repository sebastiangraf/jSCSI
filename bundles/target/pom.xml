<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
   <modelVersion>4.0.0</modelVersion>
   <parent>
      <groupId>org.jscsi</groupId>
      <artifactId>jscsi-pom</artifactId>
      <version>2.7.0</version>
      <relativePath>../../pom.xml</relativePath>
   </parent>

   <artifactId>jscsi-target</artifactId>
   <packaging>jar</packaging>
   <name>${project.groupId}:${project.artifactId}</name>

   <properties>
      <jclouds.version>1.8.1</jclouds.version>
   </properties>

   <profiles>
      <profile>
         <activation>
            <activeByDefault>true</activeByDefault>
         </activation>
         <build>
            <plugins>
               <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-assembly-plugin</artifactId>
                  <configuration>
                     <descriptors>
                        <descriptor>src/main/assembly/jarAssembly.xml</descriptor>
                     </descriptors>
                     <archive>
                        <manifest>
                           <mainClass>org.jscsi.target.TargetServer</mainClass>
                        </manifest>
                     </archive>
                  </configuration>
               </plugin>
            </plugins>
         </build>
      </profile>
      <profile>
         <id>osgi-bundle</id>
         <build>
            <plugins>
               <plugin>
                  <groupId>org.apache.felix</groupId>
                  <artifactId>maven-bundle-plugin</artifactId>
                  <version>2.4.0</version>
                  <extensions>true</extensions>
                  <configuration>
                     <instructions>
                        <Bundle-Activator>org.jscsi.target.Activator</Bundle-Activator>
                        <Bundle-SymbolicName>${project.artifactId}-bundle</Bundle-SymbolicName>
                        <Export-Package>org.jscsi.target.*</Export-Package>
                        <Import-Package>
                           org.osgi.framework,
                           javax.crypto,
                           javax.crypto.spec,
                           javax.lang.model.type,
                           javax.management,
                           javax.naming,
                           javax.net.ssl,
                           javax.security.auth.x500,
                           javax.sql,
                           javax.sql.rowset.serial,
                           javax.xml.bind,
                           javax.xml.namespace,
                           javax.xml.parsers,
                           javax.xml.transform,
                           javax.xml.transform.dom,
                           javax.xml.transform.stream,
                           javax.xml.validation,
                           javax.xml.xpath,
                           org.osgi.util.tracker,
                           org.w3c.dom,
                           org.xml.sax,
                           org.xml.sax.helpers
                        </Import-Package>
                        <Embed-Dependency>*;scope=compile|runtime;inline=false</Embed-Dependency>
                        <Embed-Transitive>true</Embed-Transitive>
                     </instructions>
                  </configuration>
               </plugin>
            </plugins>
         </build>
      </profile>
   </profiles>
   <dependencies>
      <dependency>
         <groupId>org.jscsi</groupId>
         <artifactId>jscsi-commons</artifactId>
         <version>2.7.0</version>
      </dependency>
      <dependency>
         <groupId>org.apache.jclouds</groupId>
         <artifactId>jclouds-blobstore</artifactId>
         <version>${jclouds.version}</version>
      </dependency>
      <dependency>
         <groupId>org.apache.jclouds.provider</groupId>
         <artifactId>aws-s3</artifactId>
         <version>${jclouds.version}</version>
      </dependency>
      <dependency>
         <groupId>org.apache.jclouds.api</groupId>
         <artifactId>filesystem</artifactId>
         <version>${jclouds.version}</version>
      </dependency>
      <dependency>
         <groupId>org.osgi</groupId>
         <artifactId>org.osgi.core</artifactId>
         <version>4.3.0</version>
      </dependency>
   </dependencies>

</project>
